---
title: js-RegExp
date: 2017-10-05 13:56:18
description: ğŸ’¬èŠä¸€èŠ javascript ä¸­çš„<b>æ­£åˆ™</b> ...ğŸ’¬
tags: [javascript,RegExp]
---

## åˆ›å»ºæ­£åˆ™

### å­—é¢é‡å½¢å¼

``` javascript
var expression = /pattern/flags;
```

- `pattern`: å¯ä»¥æ˜¯ä»»ä½•ç®€å•æˆ–å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¯ä»¥åŒ…å«å­—ç¬¦ç±»ã€é™å®šç¬¦ã€åˆ†ç»„ã€å‘å‰æŸ¥æ‰¾ä»¥åŠåå‘åº”ç”¨ï¼›
- `flags`:
  - `g` å…¨å±€æ¨¡å¼(global)ï¼Œå³åº”ç”¨äºæ‰€æœ‰å­—ç¬¦ä¸²ï¼Œè€Œéå‘ç°ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹æ—¶ç«‹å³åœæ­¢ï¼›
  - `i` ä¸åŒºåˆ†å¤§å°å†™(case-insensitive)æ¨¡å¼ï¼›
  - `m` å¤šè¡Œ(multiline)æ¨¡å¼ï¼Œå³åœ¨åˆ°è¾¾ä¸€è¡Œæ–‡æœ¬æœ«å°¾æ—¶è¿˜ä¼šç»§ç»­æŸ¥æ‰¾ä¸‹ä¸€è¡Œä¸­æ˜¯å¦å­˜åœ¨ä¸æ¨¡å¼åŒ¹é…çš„é¡¹ã€‚

æ¨¡å¼(pattern)ä¸­ä½¿ç”¨çš„**å…ƒå­—ç¬¦**éƒ½å¿…é¡»è½¬ä¹‰ã€‚æ­£åˆ™ä¸­çš„å…ƒå­—ç¬¦åŒ…æ‹¬ï¼š

``` javascript
( [ { \ ^ $ | ) ? * + .]}
```

### RegExp æ„é€ å‡½æ•°

``` javascript
var expression = new RegExp('pattern', 'flags');
```

> æ³¨æ„ï¼šä¼ é€’ç»™ RegExp æ„é€ å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥åœ¨æŸäº›æƒ…å†µä¸‹éœ€è¦å¯¹å­—ç¬¦è¿›è¡ŒåŒé‡è½¬ä¹‰ã€‚æ‰€æœ‰å…ƒå­—ç¬¦éƒ½å¿…é¡»åŒé‡è½¬ä¹‰ï¼ˆä¾‹å¦‚`\n`ï¼Œå­—ç¬¦ `\` åœ¨å­—ç¬¦ä¸²ä¸­é€šå¸¸è¢«è½¬ä¹‰ä¸º `\\`ï¼Œè€Œåœ¨æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²ä¸­å°±ä¼šå˜æˆ `\\\\`ã€‚ï¼‰

## RegExp å®ä¾‹å±æ€§

- `global` ï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦è®¾ç½®äº† `g` æ ‡å¿—ï¼›
- `ignoreCase` ï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦è®¾ç½®äº† `i` æ ‡å¿—ï¼›
- `lastIndex` ï¼šæ•´æ•°ï¼Œè¡¨ç¤ºå¼€å§‹æœç´¢ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹çš„å­—ç¬¦ä½ç½®ï¼Œä» 0 ç®—èµ·ï¼›
- `multiline` ï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦è®¾ç½®äº† `m` æ ‡å¿—ï¼›
- `source` ï¼šæ­£åˆ™çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼ŒæŒ‰ç…§å­—é¢é‡å½¢å¼è€Œéä¼ å…¥æ„é€ å‡½æ•°ä¸­çš„å­—ç¬¦ä¸²æ¨¡å¼è¿”å›ã€‚

``` javascript
var pattern1 = /\[bc\]at/i;

alert(pattern1.global);  //false
alert(pattern1.ignoreCase);  //true
alert(pattern1.multiline);  //false
alert(pattern1.lastIndex);  //0
alert(pattern1.source);  //"\[bc\]at"

var pattern2 = new RegExp("\\[bc\\]at", "i");

alert(pattern2.global);  //false
alert(pattern2.ignoreCase);  //true
alert(pattern2.multiline);  //false
alert(pattern2.lastIndex);  //0
alert(pattern2.source); //"\[bc\]at"
```

## RegExp å®ä¾‹æ–¹æ³•

### 1. exec()

`exec()` æ–¹æ³•ç”¨äºæ•è·ç»„ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå³è¦åº”ç”¨æ¨¡å¼çš„å­—ç¬¦ä¸²ï¼Œç„¶åè¿”å›åŒ…å«ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„æ•°ç»„ï¼›æˆ–åœ¨æ²¡æœ‰åŒ¹é…é¡¹çš„æƒ…å†µä¸‹è¿”å› nullã€‚

å®ƒè¿”å›çš„æ•°ç»„åŒ…å«ä¸¤ä¸ªé¢å¤–çš„å±æ€§ï¼š`index` å’Œ `input`ã€‚

- `index` è¡¨ç¤ºåŒ¹é…é¡¹åœ¨å­—ç¬¦ä¸²ä¸­çš„ä½ç½®ï¼›
- `input` è¡¨ç¤ºåº”ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²ã€‚

``` javascript
var text = "mom and dad and baby";
var pattern = /mom( and dad( and baby)?)?/gi;

var matches = pattern.exec(text);
alert(matches.index); // 0
alert(matches.input); // "mom and dad and baby"
alert(matches[0]); // "mom and dad and baby"
alert(matches[1]); // " and dad and baby"
alert(matches[2]); // " and baby"
```

### 2. test()

`test()` æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ã€‚åœ¨æ¨¡å¼ä¸è¯¥å‚æ•°åŒ¹é…çš„æƒ…å†µä¸‹è¿”å› trueï¼›å¦åˆ™ï¼Œè¿”å› falseã€‚

åœ¨åªæƒ³çŸ¥é“ç›®æ ‡å­—ç¬¦ä¸²ä¸æŸä¸ªæ¨¡å¼æ˜¯å¦åŒ¹é…ï¼Œä½†ä¸éœ€è¦çŸ¥é“å…¶æ–‡æœ¬å†…å®¹çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•éå¸¸æ–¹ä¾¿ã€‚å› æ­¤ï¼Œ`test()` æ–¹æ³•ç»å¸¸è¢«ç”¨åœ¨ if è¯­å¥ä¸­ã€‚

``` javascript
var text = "000-00-0000";
var pattern = /\d{3}-\d{2}-\d{4}/;

if (pattern.test(text)){
    alert("The pattern was matched.");
}
```

RegExp å®ä¾‹ç»§æ‰¿çš„ `toLocaleString()` å’Œ `toString()` æ–¹æ³•éƒ½è¿”å›æ­£åˆ™è¡¨è¾¾å¼çš„å­—é¢é‡ï¼Œä¸åˆ›å»ºæ­£åˆ™çš„æ–¹å¼æ— å…³ã€‚è€Œ `valueOf()` æ–¹æ³•è¿”å›æ­£åˆ™è¡¨è¾¾å¼æœ¬èº«ã€‚

## RegExp æ„é€ å‡½æ•°å±æ€§

| é•¿å±æ€§å | çŸ­å±æ€§å | è¯´æ˜ |
|- - - | - - - | - - -|
| input | $_ | æœ€è¿‘ä¸€æ¬¡è¦åŒ¹é…çš„å­—ç¬¦ä¸²ã€‚Operaæœªå®ç°æ­¤å±æ€§ |
| lastMatch | $& | æœ€è¿‘ä¸€æ¬¡çš„åŒ¹é…é¡¹ã€‚Operaæœªå®ç°æ­¤å±æ€§ |
| lastParen | $+ | æœ€åä¸€æ¬¡åŒ¹é…çš„æ•è·ç»„ã€‚Operaæœªå®ç°æ­¤å±æ€§ |
| leftContext | $\` | input å­—ç¬¦ä¸²ä¸­ lastMatch ä¹‹å‰çš„æ–‡æœ¬ |
| multiline | $* | å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ‰€æœ‰è¡¨è¾¾å¼éƒ½ä½¿ç”¨å¤šè¡Œæ¨¡å¼ã€‚IEå’ŒOperaæœªå®ç°æ­¤å±æ€§ |
| rightContext | $' | input å­—ç¬¦ä¸²ä¸­ lastMatch ä¹‹åçš„æ–‡æœ¬ |

é™¤äº†ä¸Šé¢è¿™å‡ ä¸ªå±æ€§å¤–ï¼Œè¿˜æœ‰9ä¸ªç”¨äºå­˜å‚¨æ•è·ç»„çš„æ„é€ å‡½æ•°å±æ€§ã€‚è®¿é—®è¿™äº›å±æ€§çš„è¯­æ³•æ˜¯ï¼š`RegExp.$1`ã€`RegExp.$2`...`RegExp.$3`ï¼Œåˆ†åˆ«ç”¨äºå­˜å‚¨ç¬¬ä¸€ã€ç¬¬äºŒ...ç¬¬ä¹ä¸ªåŒ¹é…çš„æ•è·ç»„ã€‚åœ¨è°ƒç”¨ `exec()` æˆ– `test()` æ–¹æ³•æ—¶ï¼Œè¿™äº›å±æ€§ä¼šè¢«è‡ªåŠ¨å¡«å……ã€‚

``` javascript
var text = "this has been a short summer";
var pattern = /(..)or(.)/g;

if (pattern.test(text)){
    alert(RegExp.$1); // sh
    alert(RegExp.$2); // t
}
```
